# Request for Evaluation and Budgeting of a Financial Management System (Bank)üè¶üè¶
Through this request, the evaluation and budgeting of an online platform that allows for customer registration, identity validation, and savings account opening is requested.

Through the platform, customers should be able to register and open a bank account.üíµ

To those customers who request the opening of an account, an initial balance of $100,000 will be granted.
Customers are required to have the ability to:
- Register new customers
- Have a savings account, automatically created during registration, with an initial balance of $100,000.
- Generate debit authorization codes for use on external platforms.
- Check the balance and movements of the account.
The platform must be able to receive debit requests from different third-party systems, using a previously generated authorization code.
Upon a debit request, the system must receive and validate a "token" previously generated by the customer, indicating a reference operation number.
The token will be used by the 3rd party entity, and must be sent together with a reference operation number.

![alt text](/docs/bank_home_page.png "Bank Home Page")

## Components
- **FastAPI for the API:** Utilizing FastAPI to build the API, a modern and high-performance web framework for Python, known for its automatic OpenAPI and JSON Schema generation, as well as its support for asynchronous programming.

- **Postgres for the Database:** Employing PostgreSQL as the database, a robust and scalable open-source relational database management system.

- **Docker Compose for Container Orchestration:** Utilizing Docker Compose to efficiently manage and run containers, facilitating a seamless deployment and scaling of the application.

- **Poetry for Dependency Management:** Employing Poetry for managing project dependencies, streamlining the process of package installation and ensuring a consistent development environment.

- **SQLModel as ORM, Sqlacodegen for Database-First Initial Migration:** Leveraging SQLModel as the Object-Relational Mapping (ORM) tool to interact with the database, coupled with Sqlacodegen for the initial migration in a database-first approach.

- **Alembic for Code to Database Migrations:** Utilizing Alembic for managing and executing database migrations, ensuring smooth transitions and updates to the database schema as the application evolves.

- **Pytest for Testing:** Employing Pytest for comprehensive testing, ensuring the reliability and correctness of the application by automating the testing process.

- **Pydantic for Model Definitions:** Utilizing Pydantic for defining data models, enabling efficient data validation and serialization, ensuring a structured and consistent data representation throughout the application.


## Design and Architecture Patterns
- **Service Pattern:** Employing the Service pattern for decoupling HTTP logic from application logic, facilitating dependency injection, and enhancing testing capabilities.

- **TDD (Test-Driven Development):** Adopting Test-Driven Development as a methodology for the development of the application, ensuring that tests are written before the actual code to promote robust and reliable software.

- **Layered Architecture:** Implementing a Layered Architecture for improved separation of concerns, promoting a modular, easily testable and maintainable structure in the application.

![alt text](/docs/architecture_diagramV2.png "Bank Home Page")

### ERD
---
![alt text](/docs/erd_bank.png "Bank Home Page")
### Use Cases UML Diagram
![alt text](/docs/use_cases_diagram.png "Bank Home Page")

### HOW TO USE
---
```poetry install```

```python -m uvicorn app.main:app --host 0.0.0.0 --port 8000```

### Cheatsheet
---
Database first tables to code models:

```sqlacodegen_v2 postgresql:///some_local_db```

(use flag --use_inflect to convert table names to singular and PascalCase)

\
Adding dependencies for development use only:

```poetry add --group dev <package>```


\
Exporting dependencies to requirements.txt:

```poetry export --without-hashes --format=requirements.txt > requirements.txt```

\
Migrating changes to database:

```alembic revision -m "create account table"```

```alembic upgrade head```

\
Initializing pre-commit:

```poetry run pre-commit install && poetry run pre-commit install -t pre-push```
```poetry run pre-commit run --all-files```
